# VRChatOpenBrowser

## このツールについて
### VRChatからブラウザでURLを開く
VRChatのワールドギミックによって、デスクトップ上のブラウザでWebページを開くことが出来ます。メインの機能になります。

### VRChatからこのアプリの情報を読み込む
VRChatのワールドギミックからStringDownloaderを使って、このアプリの情報をJSON型式で取得することが出来ます。アプリを起動した状態で[http://localhost:21983/](http://localhost:21983/)にアクセスしてください。

### VRChatからファイルを読み込む
VRChatのワールドギミックから、このアプリを経由してテキストファイル、画像ファイル、動画ファイルなどを取得することが出来ます。アプリを起動した状態で[http://localhost:21983/keys/ファイル名](http://localhost:21983/keys/ファイル名)にアクセスしてください。  
ファイルは`%appdata%\YukiYukiVirtual\OpenBrowserServer\keys`に置いてください。  
日本語を含むテキストファイルを使いたい場合はUTF-16にしたら文字化けしないと思います。  
この機能はあまり使わないと思います。

## インストール
1. zipファイルを解凍し、`setup.exe`を実行してください。項目はデフォルトでインストールしてください。  
2. 通常はPC起動時に自動起動されるようになっています。初回起動時・自分でアプリを終了した時・アプリが落ちた時は、スタートメニューから`VRChatOpenBrowser.exe`を起動してください。
3. VRChatで設定を開き、`信頼されていないURLを許可`を有効にしてください。
![](readme_resource/AllowUntrustedUrl.png "VRChatの設定メニューの画像")

## アップデート
最新のインストーラーをダウンロードして、インストールしてください。

## アンインストール
Windowsの設定アプリからアプリのアンインストールを実行してください。  
設定ファイルやログファイルを`%appdata%\YukiYukiVirtual\OpenBrowserServer`に保存していますので、必要であればこちらも削除してください。

## 操作方法
### タスクトレイ
![](readme_resource/TaskTray.png "タスクトレイの画像")

タスクトレイに雪のアイコンが表示されています。ダブルクリックでコントロールパネルが開きます。右クリックすることで実行できる項目もあります。

### コントロールパネル
![](readme_resource/ControlPanel.png "コントロールパネルの画像")

`許可ドメイン一覧`と`許可プロトコル一覧`は、現在許可されているものが表示されています。**設定ファイル**の章に詳しく載っています。
ローカルの設定ファイルを編集して`ローカル設定ファイル読み込み`ボタンを押すと一時的に(起動中に)反映されます。

VRChatでワールド移動すると`今いるワールド`に反映されます。

その他のボタンについてはマウスカーソルを乗せると説明が表示されます。

## 設定ファイル
設定ファイルは基本的に変更する必要はなく、変更してもアプリ起動時に自動でダウンロードされます。

設定ファイルは`setting.yaml`という名前で`%appdata%\YukiYukiVirtual\OpenBrowserServer`フォルダにダウンロードされます。

![](readme_resource/AppData.png "フォルダの画像")

### YAMLの項目
- Version:
アプリのバージョンです。

- IdlePeriod:
ブラウザを開く要求を聞く間隔(ミリ秒)です。

- HttpRequestPeriod:
HTTP要求を聞く間隔(ミリ秒)です。

- WatchdogTime:
VRChatが動いていないと判断する時間(分)です。

- Protocol:
ブラウザを開くことが出来るURLのプロトコル(スキーム)です。例:https

- Domain:
ブラウザを開くことが出来るURLのドメインです。サブドメインも開けるようになります。例:`yukiyukivirtual.net`を指定すると、`www.yukiyukivirtual.net`も開くことが出来ます。

- BannedUser:
登録されているユーザーのワールドに入った際に、コンピューターの保護のためにこのアプリの動作を一時停止します。  
ワールド作者の何らかのやらかしで、このアプリに対して不具合をきたす報告があった際に追加されることがあります。改善されると削除されることがあります。
  - Id:
BANするユーザーのIDです。
  - Reason:
BAN理由です。

## ログファイル
このアプリの起動時からの履歴を残したテキストファイルです。不具合報告などの時に送ってください。  
日付ごとに作成され、古いファイルから削除されます。最大10個保持されます。  
メモ帳などで開くことが出来ます。

## ワールドギミック(ワールド製作者向け)
いつか書きます

## 免責
このアプリを使用して発生したいかなる障害について、製作者は責任を負いません。

## 問い合わせ
- [Discord](https://discord.gg/9MwqEGvdTm)
- [GitHub](https://github.com/YukiYukiVirtual/OpenBrowserServer)  

こちらからのお知らせはDiscordサーバーでやります。必ず入っておいてください。  
不具合報告、デフォルトで許可してほしいドメイン名はここに報告お願いします。特に重大な欠陥などが見つかった際はすぐにお知らせください。  
イベント等で利用する際は、ぜひ教えてください！拡散に協力したいです。
